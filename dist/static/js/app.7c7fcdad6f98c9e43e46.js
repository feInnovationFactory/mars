webpackJsonp([1],{"/n3g":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"none","before-upload":t.beforeAvatarUpload}},[a("el-tooltip",{attrs:{content:"文件不会上传到服务器，只会在浏览器进行内容读取"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传 *.log 文件，且不超过 10MB")])],1),t._v(" "),a("el-alert",{staticStyle:{"margin-top":"10px"},attrs:{title:" ",type:"info"}},[t._v("地图会先从日志中进行读取，如果日志中不存在地图信息则使用第一张地图")]),t._v(" "),t.replayLogs.length>1?a("div",{staticStyle:{"margin-bottom":"12px"}},[a("div",[a("el-slider",{attrs:{disabled:!t.replayLogs||0===t.replayLogs.length,min:1,max:t.replayLogs.length>1?t.replayLogs.length:1},model:{value:t.currentStep,callback:function(e){t.currentStep=e},expression:"currentStep"}})],1),t._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-input-number",{attrs:{disabled:!t.replayLogs||0===t.replayLogs.length},model:{value:t.currentStep,callback:function(e){t.currentStep=e},expression:"currentStep"}})],1),t._v(" "),a("el-button",{attrs:{type:t.playStatus.playing?"danger":"primary"},on:{click:t.play}},[t._v("\n        "+t._s(t.playStatus.playing?"暂停":"播放")+"\n      ")]),t._v(" "),a("el-button",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("el-tooltip",{staticStyle:{"vertical-align":"top","margin-left":"10px",width:"100px"},attrs:{content:"暂停后才能更改速度"}},[a("el-select",{model:{value:t.playStatus.speed,callback:function(e){t.$set(t.playStatus,"speed",e)},expression:"playStatus.speed"}},[a("el-option",{attrs:{value:300,label:"0.3s"}}),t._v(" "),a("el-option",{attrs:{value:500,label:"0.5s"}}),t._v(" "),a("el-option",{attrs:{value:1e3,label:"1s"}}),t._v(" "),a("el-option",{attrs:{value:2e3,label:"2s"}}),t._v(" "),a("el-option",{attrs:{value:5e3,label:"5s"}})],1)],1),t._v(" "),a("el-input",{staticStyle:{"margin-top":"10px"},attrs:{value:JSON.stringify(t.currentState),type:"textarea",autosize:{minRows:8,maxRows:20},readonly:""}})],1):t._e()],1),t._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"tank-replayer--legend"},[a("tank",{staticClass:"is-legend",attrs:{type:"blue"}}),t._v(t._s(t.blueHost)+"\n      "),a("tank",{staticClass:"is-legend",attrs:{type:"red"}}),t._v(t._s(t.redHost)+"\n    ")],1),t._v(" "),a("div",{staticClass:"tank-replayer"},[a("tank-map",{attrs:{data:t.map.data,size:t.map.size}},[a("flag",{attrs:{position:(t.currentState.flag||{}).position}})],1),t._v(" "),t._l(t.currentState.tanks,function(e){return a("tank",{key:e.id,attrs:{id:e.id,type:e.type,dir:e.dir,status:e.status,speed:t.playStatus.speed,position:e.position}})}),t._v(" "),t._l(t.currentState.shells,function(e){return a("bullet",{key:e.id+"-"+e.status,attrs:{type:e.type||"red",dir:e.dir,status:e.status,speed:t.playStatus.speed,position:e.position}})})],2)])],1)},s=[],r={render:n,staticRenderFns:s};e.a=r},"1+V+":function(t,e){},"1J2m":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"flag",class:{hidden:!t.visible}})},s=[],r={render:n,staticRenderFns:s};e.a=r},"3GDu":function(t,e,a){"use strict";function n(t){a("LIGL")}var s=a("fGNU"),r=a("YJd8"),i=a("VU/8"),o=n,l=i(s.a,r.a,!1,o,null,null);e.a=l.exports},"6AgR":function(t,e,a){"use strict";e.a={name:"Bullet",props:{type:String,position:Object,dir:String,status:String,speed:Number}}},"7ftZ":function(t,e){},"9NNe":function(t,e,a){"use strict";function n(t){a("qxeO")}var s=a("y0VO"),r=a("/n3g"),i=a("VU/8"),o=n,l=i(s.a,r.a,!1,o,null,null);e.a=l.exports},LIGL:function(t,e){},M93x:function(t,e,a){"use strict";function n(t){a("7ftZ")}var s=a("xJD8"),r=a("hW3b"),i=a("VU/8"),o=n,l=i(s.a,r.a,!1,o,null,null);e.a=l.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),s=a("M93x"),r=a("YaEn"),i=a("zL8q"),o=a.n(i),l=a("tvR6");a.n(l);n.default.use(o.a),n.default.config.productionTip=!1,new n.default({el:"#app",router:r.a,template:"<App/>",components:{App:s.a}})},VF7z:function(t,e,a){"use strict";function n(t){a("VIBN")}var s=a("c03n"),r=a("qhxx"),i=a("VU/8"),o=n,l=i(s.a,r.a,!1,o,null,null);e.a=l.exports},VIBN:function(t,e){},YJd8:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tank-map",style:{width:50*t.size+"px"}},[t._l(t.data,function(e,n){return a("div",{key:n,staticClass:"tank-map-row"},t._l(e,function(t,e){return a("span",{key:e,staticClass:"tank-map-cell",class:{"is-empty":0===t.type,"is-block":1===t.type,"is-forest":2===t.type}})}))}),t._v(" "),t._t("default")],2)},s=[],r={render:n,staticRenderFns:s};e.a=r},YaEn:function(t,e,a){"use strict";var n=a("7+uW"),s=a("/ocq"),r=a("9NNe");n.default.use(s.a),e.a=new s.a({routes:[{path:"/",name:"Replayer",component:r.a}]})},ZfIe:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"bullet",class:{"is-blue":"blue"===t.type,"is-red":"red"===t.type,"is-down":"down"===t.dir,"is-left":"left"===t.dir,"is-right":"right"===t.dir,"is-destroyed":"destroyed"===t.status},style:{left:(t.position?50*t.position.y:0)+"px",top:(t.position?50*t.position.x:0)+"px","transition-duration":t.speed?.8*t.speed+"ms":"500ms"}})},s=[],r={render:n,staticRenderFns:s};e.a=r},c03n:function(t,e,a){"use strict";e.a={name:"tank",props:{id:[String,Number],type:String,dir:String,status:String,position:Object,speed:Number}}},fGNU:function(t,e,a){"use strict";e.a={name:"Map",props:{data:{type:Array},size:{type:Number}}}},fqxW:function(t,e){},hW3b:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],r={render:n,staticRenderFns:s};e.a=r},hZkW:function(t,e,a){"use strict";function n(t){a("1+V+")}var s=a("6AgR"),r=a("ZfIe"),i=a("VU/8"),o=n,l=i(s.a,r.a,!1,o,null,null);e.a=l.exports},"m/y8":function(t,e,a){"use strict";function n(t){a("fqxW")}var s=a("ooJ9"),r=a("1J2m"),i=a("VU/8"),o=n,l=i(s.a,r.a,!1,o,null,null);e.a=l.exports},ooJ9:function(t,e,a){"use strict";e.a={name:"Flag",props:{position:Object},computed:{visible:function(){return!!this.position}}}},qhxx:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tank",class:{"is-blue":"blue"===t.type,"is-red":"red"===t.type,"is-down":"down"===t.dir,"is-left":"left"===t.dir,"is-right":"right"===t.dir},style:{left:(t.position?50*t.position.y:0)+"px",top:(t.position?50*t.position.x:0)+"px","transition-duration":t.speed?.8*t.speed+"ms":"500ms"}},[a("span",{staticClass:"tank-id"},[t._v(t._s(t.id))])])},s=[],r={render:n,staticRenderFns:s};e.a=r},qxeO:function(t,e){},tvR6:function(t,e){},xJD8:function(t,e,a){"use strict";e.a={name:"app"}},y0VO:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__map__=__webpack_require__("zD9L"),__WEBPACK_IMPORTED_MODULE_1__components_Map__=__webpack_require__("3GDu"),__WEBPACK_IMPORTED_MODULE_2__components_Bullet__=__webpack_require__("hZkW"),__WEBPACK_IMPORTED_MODULE_3__components_Tank__=__webpack_require__("VF7z"),__WEBPACK_IMPORTED_MODULE_4__components_Flag__=__webpack_require__("m/y8");__webpack_exports__.a={name:"Replayer",components:{TankMap:__WEBPACK_IMPORTED_MODULE_1__components_Map__.a,Bullet:__WEBPACK_IMPORTED_MODULE_2__components_Bullet__.a,Tank:__WEBPACK_IMPORTED_MODULE_3__components_Tank__.a,Flag:__WEBPACK_IMPORTED_MODULE_4__components_Flag__.a},computed:{currentState:function(){return this.replayLogs[this.currentStep-1]||{}}},methods:{play:function(){var t=this,e=this.playStatus.playing,a=function(){clearInterval(t.playStatus.interval),t.playStatus.interval=null,t.playStatus.playing=!1};e?a():(this.playStatus.playing=!0,this.currentStep+=1,this.playStatus.interval=setInterval(function(){t.currentStep+=1,t.currentStep>=t.replayLogs.length&&a()},this.playStatus.speed))},reset:function(){var t=this.playStatus.interval;clearInterval(t),this.playStatus.interval=null,this.playStatus.playing=!1,this.currentStep=0},beforeAvatarUpload:function(t){var e=this,a=new FileReader;return a.onload=function(t){e.formatRawLog(t.target.result)},a.readAsText(t),!1},formatRawLog:function formatRawLog(rawLog){var mapDataMatches=/const\s+MAP_1\s+=\s+'([\d\s\n\r]*)'/g.exec(rawLog||"");if(mapDataMatches){var mapSource=mapDataMatches[1];this.map=Object(__WEBPACK_IMPORTED_MODULE_0__map__.b)(mapSource)}var logs=(rawLog||"").split("\n").filter(function(t){return-1!==t.indexOf("ReplayLog:")}).map(function(t){return t.replace(/ReplayLog:/g,"").replace(/,,/g,",").replace(/(dir|status|owner):([\w\-\.:]+)/g,function(t,e,a){return e+':"'+a+'"'})});try{var replayLogs=eval("["+logs.join(",")+"]"),firstLog=(replayLogs||[])[0],blueHost=void 0,redHost=void 0;firstLog&&firstLog.tanks&&firstLog.tanks.forEach(function(t){blueHost||(blueHost=t.owner),redHost||blueHost===t.owner||(redHost=t.owner)}),this.blueHost=blueHost,this.redHost=redHost,replayLogs.forEach(function(t){var e=t.tanks,a=void 0===e?[]:e,n=t.shells,s=void 0===n?[]:n;a.forEach(function(t){t.type=blueHost===t.owner?"blue":"red",t.dir=(t.dir||"").toLowerCase()}),s.forEach(function(t){t.dir=(t.dir||"").toLowerCase()})}),this.replayLogs=replayLogs}catch(t){window.Raven&&window.Raven.captureException(t),this.$message.error("文件解析发生错误："+t)}}},data:function(){return{playStatus:{interval:null,playing:!1,speed:500},currentStep:0,replayLogs:[],map:__WEBPACK_IMPORTED_MODULE_0__map__.a,blueHost:"blue:80",redHost:"red:80"}}}},zD9L:function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"a",function(){return s});var n=function(t){var e=t.split("\n"),a=!1,n=void 0,s=[];return e.forEach(function(t){!a&&t.indexOf("size:")>-1?(n=+t.replace("size:","").trim(),a=!0):-1===t.indexOf("//")&&s.push(t.split(" ").map(function(t){return{type:parseInt(t,10)}}))}),!n&&s[0]&&(n=s[0].length),{size:n,data:s}},s=n("size: 19\n//                *\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n1 2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1\n1 2 0 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1\n1 1 1 1 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1\n1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1\n1 0 0 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 1\n1 0 0 0 0 2 2 1 2 2 2 2 2 2 0 0 0 0 1\n1 0 0 0 0 2 2 1 2 2 2 2 2 2 0 0 0 0 1\n1 0 0 0 0 2 2 2 2 2 2 2 2 2 0 0 0 0 1\n1 0 0 0 0 2 2 2 2 2 2 2 2 2 0 0 0 0 1\n1 0 0 0 0 2 2 2 2 2 2 2 2 2 0 0 0 0 1\n1 0 0 0 0 2 2 2 2 2 2 1 2 2 0 0 0 0 1\n1 0 0 0 0 2 2 2 2 2 2 1 2 2 0 0 0 0 1\n1 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 0 0 1\n1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 1\n1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 1 1 1\n1 0 0 0 0 0 0 0 0 1 0 0 0 0 0 1 0 2 1\n1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2 1\n1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1")}},["NHnr"]);
//# sourceMappingURL=app.7c7fcdad6f98c9e43e46.js.map